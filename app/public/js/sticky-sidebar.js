/**
 * Sticky Sidebar JavaScript Plugin.
 * @version 3.2.0
 * @author Ahmed Bouhuolia <a.bouhuolia@gmail.com>
 * @license The MIT License (MIT)
 */ const StickySidebar=(()=>{let b=".stickySidebar",c={topSpacing:0,bottomSpacing:0,containerSelector:!1,innerWrapperSelector:".inner-wrapper-sticky",stickyClass:"is-affixed",resizeSensor:!0,minWidth:!1};class a{constructor(b,d={}){if(this.options=a.extend(c,d),this.sidebar="string"==typeof b?document.querySelector(b):b,void 0===this.sidebar)throw new Error("There is no specific sidebar element.");this.sidebarInner=!1,this.container=this.sidebar.parentElement,this.affixedType="STATIC",this.direction="down",this.support={transform:!1,transform3d:!1},this._initialized=!1,this._breakpoint=!1,this._resizeListeners=[],this.dimensions={translateY:0,topSpacing:0,bottomSpacing:0,sidebarHeight:0,sidebarWidth:0,containerTop:0,containerHeight:0,viewportHeight:0,viewportTop:0,lastViewportTop:0},["handleEvent"].forEach(a=>{this[a]=this[a].bind(this)}),this.initialize()}initialize(){if(this._setSupportFeatures(),this.options.innerWrapperSelector&&(this.sidebarInner=this.sidebar.querySelector(this.options.innerWrapperSelector),null===this.sidebarInner&&(this.sidebarInner=!1)),!this.sidebarInner){let a=document.createElement("div");for(a.setAttribute("class","inner-wrapper-sticky"),this.sidebar.appendChild(a);this.sidebar.firstChild!=a;)a.appendChild(this.sidebar.firstChild);this.sidebarInner=this.sidebar.querySelector(".inner-wrapper-sticky")}if(this.options.containerSelector){let b=document.querySelectorAll(this.options.containerSelector);if((b=Array.prototype.slice.call(b)).forEach((a,b)=>{a.contains(this.sidebar)&&(this.container=a)}),!b.length)throw new Error("The container does not contains on the sidebar.")}"function"!=typeof this.options.topSpacing&&(this.options.topSpacing=parseInt(this.options.topSpacing)||0),"function"!=typeof this.options.bottomSpacing&&(this.options.bottomSpacing=parseInt(this.options.bottomSpacing)||0),this._widthBreakpoint(),this.calcDimensions(),this.stickyPosition(),this.bindEvents(),this._initialized=!0}bindEvents(){window.addEventListener("resize",this,{passive:!0}),window.addEventListener("scroll",this,{passive:!0}),this.sidebar.addEventListener("update"+b,this),this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(new ResizeSensor(this.sidebarInner,this.handleEvent),new ResizeSensor(this.container,this.handleEvent))}handleEvent(a){this.updateSticky(a)}calcDimensions(){if(!this._breakpoint){var b=this.dimensions;b.containerTop=a.offsetRelative(this.container).top,b.containerHeight=this.container.clientHeight,b.containerBottom=b.containerTop+b.containerHeight,b.sidebarHeight=this.sidebarInner.offsetHeight,b.sidebarWidth=this.sidebar.offsetWidth,b.viewportHeight=window.innerHeight,this._calcDimensionsWithScroll()}}_calcDimensionsWithScroll(){var b=this.dimensions;b.sidebarLeft=a.offsetRelative(this.sidebar).left,b.viewportTop=document.documentElement.scrollTop||document.body.scrollTop,b.viewportBottom=b.viewportTop+b.viewportHeight,b.viewportLeft=document.documentElement.scrollLeft||document.body.scrollLeft,b.topSpacing=this.options.topSpacing,b.bottomSpacing=this.options.bottomSpacing,"function"==typeof b.topSpacing&&(b.topSpacing=parseInt(b.topSpacing(this.sidebar))||0),"function"==typeof b.bottomSpacing&&(b.bottomSpacing=parseInt(b.bottomSpacing(this.sidebar))||0)}isSidebarFitsViewport(){return this.dimensions.sidebarHeight<this.dimensions.viewportHeight}observeScrollDir(){var a=this.dimensions;if(a.lastViewportTop!==a.viewportTop){var b="down"===this.direction?Math.min:Math.max;a.viewportTop===b(a.viewportTop,a.lastViewportTop)&&(this.direction="down"===this.direction?"up":"down")}}getAffixType(){var a=this.dimensions,b=!1;this._calcDimensionsWithScroll();var d=a.sidebarHeight+a.containerTop,c=a.viewportTop+a.topSpacing,e=a.viewportBottom-a.bottomSpacing;return"up"===this.direction?c<=a.containerTop?(a.translateY=0,b="STATIC"):c<=a.translateY+a.containerTop?(a.translateY=c-a.containerTop,b="VIEWPORT-TOP"):!this.isSidebarFitsViewport()&&a.containerTop<=c&&(b="VIEWPORT-UNBOTTOM"):this.isSidebarFitsViewport()?a.sidebarHeight+c>=a.containerBottom?(a.translateY=a.containerBottom-d,b="CONTAINER-BOTTOM"):c>=a.containerTop&&(a.translateY=c-a.containerTop,b="VIEWPORT-TOP"):a.containerBottom<=e?(a.translateY=a.containerBottom-d,b="CONTAINER-BOTTOM"):d+a.translateY<=e?(a.translateY=e-d,b="VIEWPORT-BOTTOM"):a.containerTop+a.translateY<=c&&(b="VIEWPORT-UNBOTTOM"),a.translateY=Math.max(0,a.translateY),a.translateY=Math.min(a.containerHeight,a.translateY),a.lastViewportTop=a.viewportTop,b}_getStyle(d){if(void 0!==d){var b={inner:{},outer:{}},c=this.dimensions;switch(d){case"VIEWPORT-TOP":b.inner={position:"fixed",top:this.options.topSpacing,left:c.sidebarLeft-c.viewportLeft,width:c.sidebarWidth};break;case"VIEWPORT-BOTTOM":b.inner={position:"fixed",top:"auto",left:c.sidebarLeft,bottom:this.options.bottomSpacing,width:c.sidebarWidth};break;case"CONTAINER-BOTTOM":case"VIEWPORT-UNBOTTOM":let e=this._getTranslate(0,c.translateY+"px");e?b.inner={transform:e}:b.inner={position:"absolute",top:c.translateY,width:c.sidebarWidth}}switch(d){case"VIEWPORT-TOP":case"VIEWPORT-BOTTOM":case"VIEWPORT-UNBOTTOM":case"CONTAINER-BOTTOM":b.outer={height:c.sidebarHeight,position:"relative"}}return b.outer=a.extend({height:"",position:""},b.outer),b.inner=a.extend({position:"relative",top:"",left:"",bottom:"",width:"",transform:this._getTranslate()},b.inner),b}}stickyPosition(e){if(!this._breakpoint){e=e||!1,this.options.topSpacing,this.options.bottomSpacing;var c=this.getAffixType(),d=this._getStyle(c);if((this.affixedType!=c||e)&&c){let h="affix."+c.toLowerCase().replace("viewport-","")+b;for(let f in a.eventTrigger(this.sidebar,h),"STATIC"===c?a.removeClass(this.sidebar,this.options.stickyClass):a.addClass(this.sidebar,this.options.stickyClass),d.outer)d.outer[f],this.sidebar.style[f]=d.outer[f];for(let g in d.inner){let i="number"==typeof d.inner[g]?"px":"";this.sidebarInner.style[g]=d.inner[g]+i}let j="affixed."+c.toLowerCase().replace("viewport","")+b;a.eventTrigger(this.sidebar,j)}else this._initialized&&(this.sidebarInner.style.left=d.inner.left);this.affixedType=c}}_widthBreakpoint(){window.innerWidth<=this.options.minWidth?(this._breakpoint=!0,this.affixedType="STATIC",this.sidebar.removeAttribute("style"),a.removeClass(this.sidebar,this.options.stickyClass),this.sidebarInner.removeAttribute("style")):this._breakpoint=!1}updateSticky(a={}){this._running||(this._running=!0,(a=>{requestAnimationFrame(()=>{"scroll"===a?(this._calcDimensionsWithScroll(),this.observeScrollDir(),this.stickyPosition()):(this._widthBreakpoint(),this.calcDimensions(),this.stickyPosition(!0)),this._running=!1})})(a.type))}_setSupportFeatures(){var b=this.support;b.transform=a.supportTransform(),b.transform3d=a.supportTransform(!0)}_getTranslate(a=0,b=0,c=0){return this.support.transform3d?"translate3d("+a+", "+b+", "+c+")":!!this.support.translate&&"translate("+a+", "+b+")"}destroy(){window.removeEventListener("resize",this),window.removeEventListener("scroll",this),this.sidebar.classList.remove(this.options.stickyClass),this.sidebar.style.minHeight="",this.sidebar.removeEventListener("update"+b,this);var a={inner:{},outer:{}};for(let c in a.inner={position:"",top:"",left:"",bottom:"",width:"",transform:""},a.outer={height:"",position:""},a.outer)this.sidebar.style[c]=a.outer[c];for(let d in a.inner)this.sidebarInner.style[d]=a.inner[d];this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(ResizeSensor.detach(this.sidebarInner,this.handleEvent),ResizeSensor.detach(this.container,this.handleEvent))}static supportTransform(c){var d=!1,a=c?"perspective":"transform",b=a.charAt(0).toUpperCase()+a.slice(1),e=document.createElement("support").style;return(a+" "+["Webkit","Moz","O","ms"].join(b+" ")+b).split(" ").forEach(function(a,b){if(void 0!==e[a])return d=a,!1}),d}static eventTrigger(d,b,c){try{var a=new CustomEvent(b,{detail:c})}catch(e){var a=document.createEvent("CustomEvent");a.initCustomEvent(b,!0,!0,c)}d.dispatchEvent(a)}static extend(c,d){var b={};for(let a in c)void 0!==d[a]?b[a]=d[a]:b[a]=c[a];return b}static offsetRelative(a){var b={left:0,top:0};do{let c=a.offsetTop,d=a.offsetLeft;isNaN(c)||(b.top+=c),isNaN(d)||(b.left+=d)}while(a=a.offsetParent)return b}static addClass(b,c){a.hasClass(b,c)||(b.classList?b.classList.add(c):b.className+=" "+c)}static removeClass(b,c){a.hasClass(b,c)&&(b.classList?b.classList.remove(c):b.className=b.className.replace(new RegExp("(^|\\b)"+c.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(a,b){return a.classList?a.classList.contains(b):new RegExp("(^| )"+b+"( |$)","gi").test(a.className)}}return a})();window.StickySidebar=StickySidebar